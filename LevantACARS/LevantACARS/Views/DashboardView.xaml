<UserControl x:Class="LevantACARS.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <Grid Margin="24,20,24,24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- ═══ ROW 0: Flight Info + Phase ══════════════════════════ -->
            <Grid Grid.Row="0" Margin="0,0,0,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Aircraft info card -->
                <Border Grid.Column="0" Style="{StaticResource InstrumentCard}" Padding="24,20">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="AIRCRAFT" Style="{StaticResource LabelStyle}" />
                            <TextBlock Text="{Binding AircraftTitle, FallbackValue='No aircraft loaded'}"
                                       FontSize="17" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"
                                       TextTrimming="CharacterEllipsis" Margin="0,4,0,0" />
                        </StackPanel>
                        <!-- Phase + Status badges -->
                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                            <Border CornerRadius="8" Padding="14,7" Margin="0,0,8,0"
                                    Background="{StaticResource SurfaceElevatedBrush}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Airplane" Width="14" Height="14"
                                        Foreground="{StaticResource AccentBrush}" VerticalAlignment="Center" Margin="0,0,6,0" />
                                    <TextBlock Text="{Binding Phase, FallbackValue='Preflight'}" FontSize="11" FontWeight="Bold"
                                               Foreground="{StaticResource AccentBrush}" VerticalAlignment="Center" />
                                </StackPanel>
                            </Border>
                            <Border CornerRadius="8" Padding="14,7">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="#1500A3FF" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding OnGround}" Value="True">
                                                <Setter Property="Background" Value="#15F0B040" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <TextBlock FontSize="11" FontWeight="Bold">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Text" Value="AIRBORNE" />
                                            <Setter Property="Foreground" Value="{StaticResource AccentBrush}" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding OnGround}" Value="True">
                                                    <Setter Property="Text" Value="ON GROUND" />
                                                    <Setter Property="Foreground" Value="{StaticResource AccentGoldBrush}" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- ═══ ROW 1: Live Telemetry Grid (4 instruments) ═════════ -->
            <StackPanel Grid.Row="1" Margin="0,0,0,4">
                <TextBlock Text="L I V E   T E L E M E T R Y" Style="{StaticResource LabelStyle}" Margin="8,0,0,8" />
            </StackPanel>

            <UniformGrid Grid.Row="2" Rows="1" Margin="0,0,0,16">
                <!-- ALT -->
                <Border Style="{StaticResource InstrumentCard}">
                    <StackPanel>
                        <TextBlock Text="ALT" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Altitude, StringFormat='{}{0:N0}'}" Style="{StaticResource ValueStyle}" />
                            <TextBlock Text="ft" Style="{StaticResource UnitStyle}" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- GS -->
                <Border Style="{StaticResource InstrumentCard}">
                    <StackPanel>
                        <TextBlock Text="GS" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding GroundSpeed}" Style="{StaticResource ValueStyle}" />
                            <TextBlock Text="kts" Style="{StaticResource UnitStyle}" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- IAS -->
                <Border Style="{StaticResource InstrumentCard}">
                    <StackPanel>
                        <TextBlock Text="IAS" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Ias}" Style="{StaticResource ValueStyle}" />
                            <TextBlock Text="kts" Style="{StaticResource UnitStyle}" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- V/S -->
                <Border Style="{StaticResource InstrumentCard}">
                    <StackPanel>
                        <TextBlock Text="V/S" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding VerticalSpeed, StringFormat='{}{0:+#;-#;0}'}" Style="{StaticResource ValueStyle}" />
                            <TextBlock Text="fpm" Style="{StaticResource UnitStyle}" />
                        </StackPanel>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- ═══ ROW 3: Secondary Row (HDG, G, Engines, Position) ═══ -->
            <Grid Grid.Row="3" Margin="0,0,0,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>

                <!-- HDG -->
                <Border Grid.Column="0" Style="{StaticResource InstrumentCard}">
                    <StackPanel>
                        <TextBlock Text="HDG" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Heading, StringFormat='{}{0:000}'}" Style="{StaticResource ValueStyle}" />
                            <TextBlock Text="°" FontSize="16" Foreground="{StaticResource TextDisabledBrush}"
                                       VerticalAlignment="Bottom" Margin="2,0,0,4" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- G-Force -->
                <Border Grid.Column="1" Style="{StaticResource InstrumentCard}">
                    <StackPanel>
                        <TextBlock Text="G-FORCE" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                        <TextBlock Text="{Binding GForce, StringFormat='{}{0:F2} G'}" Style="{StaticResource ValueStyle}" />
                    </StackPanel>
                </Border>

                <!-- Engines -->
                <Border Grid.Column="2" Style="{StaticResource InstrumentCard}">
                    <StackPanel>
                        <TextBlock Text="ENGINES" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                        <TextBlock FontSize="20" FontWeight="Bold">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="OFF" />
                                    <Setter Property="Foreground" Value="{StaticResource DangerBrush}" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding EnginesOn}" Value="True">
                                            <Setter Property="Text" Value="RUNNING" />
                                            <Setter Property="Foreground" Value="{StaticResource SuccessBrush}" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- Position -->
                <Border Grid.Column="3" Style="{StaticResource InstrumentCard}">
                    <StackPanel>
                        <TextBlock Text="POSITION" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                        <TextBlock FontSize="14" FontFamily="Cascadia Mono, Consolas"
                                   Foreground="{StaticResource TextPrimaryBrush}" TextWrapping="Wrap">
                            <Run Text="{Binding Latitude, StringFormat='{}{0:F5}'}" />
                            <Run Text=", " Foreground="{StaticResource TextDisabledBrush}" />
                            <Run Text="{Binding Longitude, StringFormat='{}{0:F5}'}" />
                        </TextBlock>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- ═══ ROW 4: Flight Progress Placeholder ═════════════════ -->
            <Border Grid.Row="4" Style="{StaticResource InstrumentCard}" Padding="24,16">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0" Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="FLIGHT PROGRESS" Style="{StaticResource LabelStyle}" Margin="0" />
                        <TextBlock Grid.Column="2" Text="NO ACTIVE FLIGHT"
                                   FontSize="10" FontWeight="Bold"
                                   Foreground="{StaticResource TextDisabledBrush}" />
                    </Grid>
                    <!-- Progress bar track -->
                    <Grid Grid.Row="1">
                        <Border Height="4" CornerRadius="2" Background="{StaticResource SurfaceElevatedBrush}" />
                        <Border Height="4" CornerRadius="2" Background="{StaticResource ProgressGradient}"
                                HorizontalAlignment="Left" Width="0" />
                    </Grid>
                </Grid>
            </Border>

        </Grid>
    </ScrollViewer>
</UserControl>
